# –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
npm run migration:generate src/database/migrations/–ù–∞–∑–≤–∞–Ω–∏–µ–ú–∏–≥—Ä–∞—Ü–∏–∏
```

### –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
npm run migration:run
```

### –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
npm run migration:revert
```

## üìã –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. `1700000000000-CreateSchemaFromEntities.ts`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—ë—Ç –≤—Å—é —Å—Ö–µ–º—É –ë–î –Ω–∞ –æ—Å–Ω–æ–≤–µ Entity –∫–ª–∞—Å—Å–æ–≤
**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã (users, products, orders, cart, favorites, etc.)
- Enum —Ç–∏–ø—ã (user_role_enum, order_status_enum)
- –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –∏ —Å–≤—è–∑–∏
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### Development vs Production
- **Development**: `synchronize: true` - —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **Production**: `synchronize: false` + –º–∏–≥—Ä–∞—Ü–∏–∏ - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–æ–π

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
1. –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
2. –ó–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å–∏–¥—ã (–∑–∞–ø–æ–ª–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–º–∏)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ù–ï —É–¥–∞–ª—è—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ backup –ø–µ—Ä–µ–¥ production –¥–µ–ø–ª–æ–µ–º
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–ø–∏–∏ production –¥–∞–Ω–Ω—ã—Ö

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### app.module.ts
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π:
```typescript
migrations: ['src/database/migrations/*.ts'],
migrationsRun: config.get<string>('NODE_ENV') === 'production',
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [TypeORM Migrations](https://typeorm.io/migrations)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
